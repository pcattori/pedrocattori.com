---
import Layout from "../../layout.astro"
import { getPosts } from "../../lib/posts"
import FormattedDate from "../../lib/formatted-date.astro"

export async function getStaticPaths() {
  let posts = await getPosts()
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }))
}

let { post } = Astro.props
let { Content } = await post.render()
---

<Layout>
  <article class="mt-4 prose px-4">
    <header>
      <h1>{post.title}</h1>
      <p class="text-xs text-muted italic">
        Published on
        <FormattedDate date={post.publishedAt} format="long" />
      </p>
    </header>
    <Content />
  </article>
</Layout>
